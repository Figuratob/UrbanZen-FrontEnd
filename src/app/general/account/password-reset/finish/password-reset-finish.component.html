<div>
  <div class="row justify-content-center">
    <div class="col-md-4">
      <h1>{{'password.reset.finish.title' | translate}}</h1>

      <div class="alert alert-danger" *ngIf="keyMissing">
        <strong>{{'password.reset.finish.messages.keyMissing' | translate}}</strong>
      </div>

      <div class="alert alert-warning" *ngIf="!success && !keyMissing">
        <p>{{'password.reset.finish.messages.info' | translate}}</p>
      </div>

      <div class="alert alert-danger" *ngIf="error">
        <p>{{'password.reset.finish.messages.error' | translate}}</p>
      </div>

      <p class="alert alert-success" *ngIf="success">
        <span><strong>{{'password.reset.finish.messages.success' | translate}}</strong></span>
        <a class="alert-link" routerLink="/login" routerLinkActive="active">{{'action.login'|translate}}.</a>
      </p>

      <div class="alert alert-danger" *ngIf="doNotMatch">
        {{'messages.error.passwordDontMatch' | translate}}
      </div>

      <div *ngIf="!keyMissing">

        <form *ngIf="!success" name="form" role="form" (ngSubmit)="finishReset()" [formGroup]="passwordForm">

          <div class="form-group">
            <label class="form-control-label" for="password">{{'form.newPassword.label' | translate}}</label>
            <input type="password" class="form-control" id="password" name="password"
                   placeholder="{{'global.form.newPassword.placeholder' | translate}}"
                   formControlName="newPassword">
            <div *ngIf="passwordForm.get('newPassword').invalid && (passwordForm.get('newPassword').dirty ||
            passwordForm.get('newPassword').touched)">
              <small class="form-text text-danger" *ngIf="passwordForm.get('newPassword').errors.required">
                {{'messages.validate.newPassword.required'| translate}}
              </small>
              <small class="form-text text-danger" *ngIf="passwordForm.get('newPassword').errors.minlength">
                {{'messages.validate.newPassword.minlength'| translate}}
              </small>
              <small class="form-text text-danger" *ngIf="passwordForm.get('newPassword').errors.maxlength">
                {{'messages.validate.newPassword.maxlength'| translate}}
              </small>
            </div>
          </div>

          <div class="form-group">
            <label class="form-control-label" for="confirmPassword">{{'form.confirmPassword.label' | translate}}
            </label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                   placeholder="{{'form.confirmPassword.placeholder' | translate}}" formControlName="confirmPassword">
            <div *ngIf="passwordForm.get('confirmPassword').invalid && (passwordForm.get('confirmPassword').dirty ||
                        passwordForm.get('confirmPassword').touched)">
              <small class="form-text text-danger" *ngIf="passwordForm.get('confirmPassword').errors.required">
                {{'messages.validate.confirmPassword.required'| translate}}
              </small>
              <small class="form-text text-danger" *ngIf="passwordForm.get('confirmPassword').errors.minlength">
                {{'messages.validate.confirmPassword.minlength'| translate}}
              </small>
              <small class="form-text text-danger" *ngIf="passwordForm.get('confirmPassword').errors.maxlength">
                {{'messages.validate.confirmPassword.maxlength'| translate}}
              </small>
            </div>
          </div>

          <button type="submit" [disabled]="passwordForm.invalid" class="btn btn-primary">
            {{'password.reset.finish.form.button' | translate}}
          </button>

        </form>
      </div>

    </div>
  </div>
</div>
